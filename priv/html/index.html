<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="author" content="Piotr Klibert">
        <link rel="shortcut icon" href="/favicon.png?v=0.1">

        <title>ReqViewer</title>

        <script src="/scripts/bundle.js"></script>
        <link rel="stylesheet" href="/styles/styles.css" type="text/css">
        <link rel="stylesheet" href="/styles/flakes.css" type="text/css">
    </head>
    <body>


        <div class="filter">
            <label for="session-filter">Filter:</label>
            <input type="text" v-model="filterExpr" placeholder="Session or method..." />
            <span class=count>(reqs: {{count}})</span>
            <a v-if="selectedRows.length &gt;  0" v-transition="fade-in-out" v-attr="href: encodedJsonData" class="fade-in-out dump" target="_blank">Dump JSON</a>
        </div>

        <div>
            <div class="grid-12 header">
                <div class="span-1 header-actions">
                    <a v-on="click: selectAll">Select all</a>&nbsp;/&nbsp;<a v-on="click: deselectAll">Deselect all</a>
                </div>
                <div class="span-4">Session ID</div>
                <div class="span-1">Method</div>
                <div class="span-2">URL</div>
                <div class="span-2">Params</div>
                <div class="span-1">Status</div>
                <div class="span-1">Duration</div>
            </div>


            <div v-repeat="filtered" class="grid-12 row fade-in-out" v-transition="fade-in-out">
                <div class="actions span-1">
                    <img v-on="click: toggleBody($data)"
                         src="img/glass.png" />
                    <input type="checkbox" v-model="checked" />
                </div>

                <div class="span-4 sess-id-wrap">
                    <span class="sess-id" v-on="click: toggleBody($data)" v-style="color: colorize(sess)">
                        {{sess}}
                    </span>
                    (IP:&nbsp;{{ip}})
                </div>

                <div class="span-1 method">{{method}}</div>
                <div class="span-2 uri">{{uri}}</div>
                <div class="span-2 args">{{args}}</div>
                <div class="span-1 status">{{resp.status}}</div>
                <div class="span-1 time" style="font-size: 12px;">
                    {{formatTime(time_taken)}}ms<br/>
                    ({{formatDate(id)}})
                </div>

                <div v-if="show_body" class="data-table span-12 grid-2 slide-in-out" v-transition="slide-in-out">
                    <div class="req span-1">
                        <h3>{{formatReq($data)}}</h3>
                        <h3>Request headers</h3>
                        <pre>{{ format(req.header) }}</pre>
                        <hr/>
                        <h3>Request body</h3>
                        <pre>{{ format(req.body) }}</pre>
                    </div>

                    <div class="resp span-1">
                        <h3>Response headers</h3>
                        <pre>{{ format(resp.header) }}</pre>
                        <h3>Response body</h3>
                        <pre>{{ format(resp.body) }}</pre>
                    </div>
                </div>
            </div>

        </div>
        </div>

    </body>
</html>
